{"version":3,"sources":["webpack:///src/components/src/components/PlayPopup.vue","webpack:///src/views/Home/src/views/Home/Home.vue"],"names":[],"mappings":"AAyXA,0BACA,cAAA,CACA,KAAA,CACA,MAAA,CACA,yBAAA,CACA,UAAA,CACA,YAAA,CACA,aAAA,CACA,WAIA,CACA,iDAJA,mBAAA,CAAA,mBAAA,CAAA,YAAA,CACA,uBAAA,CAAA,oBAAA,CAAA,sBAAA,CACA,wBAAA,CAAA,qBAAA,CAAA,kBASA,CAPA,uBACA,SAAA,CACA,WAKA,CACA,8BACA,SAAA,CACA,WAAA,CACA,WAMA,CACA,0BACA,SAAA,CACA,WAAA,CACA,qBAAA,CACA,gCAAA,CACA,wBAAA,CACA,sCAAA,CAAA,8BAAA,CACA,kBAAA,CACA,iBAAA,CACA,aACA,CACA,kCACA,UAAA,CACA,iBAAA,CACA,UACA,CACA,sCACA,oBACA,CACA,iCACA,SAKA,CACA,gEALA,iBAAA,CACA,OAAA,CACA,QAAA,CACA,sCAAA,CAAA,8BAOA,CACA,8BACA,iBAAA,CACA,KAAA,CACA,QAAA,CACA,sCAAA,CAAA,8BACA,CACA,gCACA,iBAAA,CACA,OAAA,CACA,OAAA,CACA,uCAAA,CAAA,+BACA,CACA,iCACA,iBAAA,CACA,QAAA,CACA,QAAA,CACA,uCAAA,CAAA,+BACA,CACA,+BACA,iBAAA,CACA,OAAA,CACA,MAAA,CACA,sCAAA,CAAA,8BACA,CAEA,2BACA,SAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,QAAA,CACA,iCAAA,CAAA,yBAAA,CACA,mBAAA,CAAA,mBAAA,CAAA,YAAA,CACA,wBAAA,CAAA,4BAAA,CACA,wBAAA,CAAA,qBAAA,CAAA,kBACA,CAYA,sDACA,QAAA,CACA,4BAAA,CACA,YAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAGA,CAEA,4BACA,kBAAA,CAAA,UAAA,CAAA,MAAA,CACA,WAAA,CACA,iBACA,CAEA,kDACA,iBAAA,CACA,SAAA,CACA,WAAA,CACA,cACA,CACA,4BACA,iBAAA,CACA,MAAA,CACA,QAAA,CACA,yBAAA,CACA,UAAA,CACA,WACA,CACA,gCACA,UAAA,CACA,WACA,CAKA,uFACA,qBACA,CACA,2CACA,0BACA,CC1TA,6BACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,kBAAA,CACA,iBAAA,CACA,cAAA,CACA,mBAAA,CACA,2BAAA,CACA,eACA,CAEA,oCACA,UAAA,CACA,SAAA,CACA,WAAA,CAEA,kBAAA,CACA,iBAAA,CACA,QAAA,CACA,SACA,CAEA,kCACA,UAAA,CACA,aAAA,CACA,gBACA,CACA,6CACA,WAAA,CACA,iBACA,CAEA,6BACA,eAEA,CAGA,+FAGA,kBACA,CAEA,4JAGA,iBAAA,CACA,iBACA,CACA,8CACA,SAAA,CACA,aAAA,CACA,eAAA,CACA,YAAA,CACA,6BAAA,CAAA,qBAAA,CACA,wBAAA,CACA,oCAAA,CAAA,4BAAA,CACA,kBACA,CACA,6BACA,aACA,CAGA,wBACA,oBACA,CAEA,gDACA,wBAAA,CACA,WACA","file":"chunk-f82f501e.d02fcc85.css","sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"main\">\r\n      <div class=\"control-box\">\r\n        <div class=\"control\">\r\n          <div class=\"circle\">\r\n            <img class=\"center\" ref=\"center\" src=\"../../static/img/control-circle.png\" />\r\n            <img class=\"stop-control\" :src=\"controlIcon.cenrerControl\" @click=\"centerControl\" />\r\n            <img class=\"top\" :src=\"controlIcon.top\" @click=\"topControl\" />\r\n            <img class=\"right\" :src=\"controlIcon.right\" @click=\"rightControl\" />\r\n            <img class=\"bottom\" :src=\"controlIcon.bottom\" @click=\"bottomControl\" />\r\n            <img class=\"left\" :src=\"controlIcon.left\" @click=\"leftControl\" />\r\n          </div>\r\n          <div class=\"btn-wrap\">\r\n            <button\r\n              class=\"play-btn\"\r\n              @click=\"fnplay\"\r\n              :style=\"{'color':playBtnColor,'background':playBtnBackground}\"\r\n            >开启</button>\r\n            <button\r\n              class=\"stop-btn\"\r\n              @click=\"fnpause\"\r\n              :style=\"{'color':stopBtnColor,'background':stopBtnBackground}\"\r\n            >结束</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"video-box\">\r\n        <EasyPlayer\r\n          ref=\"video\"\r\n          @ready=\"ready\"\r\n          @snapInside=\"snapInside\"\r\n          :videoUrl=\"videoUrl\"\r\n          @play=\"play\"\r\n          @message=\"message\"\r\n          @timeupdate=\"timeupdate\"\r\n          fluent\r\n          live\r\n          stretch\r\n          :show-custom-button=\"true\"\r\n        ></EasyPlayer>\r\n        <div class=\"close\">\r\n          <i class=\"el-icon-circle-close\" @click=\"closePopup\"></i>\r\n        </div>\r\n        <div class=\"cover-box\">\r\n          <img src=\"../../static/img/login-logo.png\" alt />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getData, postData } from \"../utils/request/http\";\r\nimport EasyPlayer from \"easy-player\";\r\nimport bus from \"./../utils/bus\";\r\n\r\nexport default {\r\n  name: \"PlayPopup\",\r\n  components: {\r\n    EasyPlayer\r\n  },\r\n  props: {\r\n    cameraNum: {\r\n      type: String\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      player: null,\r\n      videoUrl: \"\",\r\n      //videoUrl: \"rtmp://192.168.1.160:1935/live/34020000001320000011\",\r\n      //videoUrl: \"rtmp://58.200.131.2:1935/livetv/hunantv\",\r\n      controlIcon: {\r\n        cenrerControl: require(\"../../static/img/stop-control.png\"),\r\n        top: require(\"../../static/img/play-icon-top.png\"),\r\n        right: require(\"../../static/img/play-icon-right.png\"),\r\n        bottom: require(\"../../static/img/play-icon-bottom.png\"),\r\n        left: require(\"../../static/img/play-icon-left.png\")\r\n      },\r\n      playBtnColor: \"#fff\",\r\n      playBtnBackground: \"#5447ff\",\r\n      stopBtnColor: \"#fff\",\r\n      stopBtnBackground: \"#d03edd\"\r\n    };\r\n  },\r\n  watch: {},\r\n  computed: {},\r\n  methods: {\r\n    /* \r\n      @desc 关闭弹窗\r\n    */\r\n    closePopup() {\r\n      let showPlayPopup = {\r\n        showPlayPopup: false\r\n      };\r\n      bus.$emit(\"sendCloseEvent\", showPlayPopup);\r\n      // this.fnpause();\r\n    },\r\n\r\n    /* \r\n      @desc 获取视频src\r\n    */\r\n    async getVideoSrc() {\r\n      var that = this;\r\n      let _cameraNum = this.cameraNum;\r\n      let res = await postData(\"/web/camera/video/url\", {\r\n        cameraNum: _cameraNum,\r\n        protocol: \"RTMP\"\r\n      }).catch(res => {\r\n        that.$message.error(res.code + \"，\" + res.msg);\r\n      });\r\n      if (res.code == \"0\") {\r\n        console.log(res);\r\n        that.videoUrl = res.data.url;\r\n        //that.fnplay();\r\n        //that.player.play();\r\n        //console.log(that.videoUrl)\r\n      } else {\r\n        that.$message.error(res.code + \"，\" + res.msg);\r\n      }\r\n    },\r\n\r\n    //内部快照回调\r\n    snapInside(e) {\r\n      console.log(e);\r\n    },\r\n    // 在这里设置，因为能播放，player对象肯定就已经存在\r\n    play(time) {\r\n      this.player = this.$refs.video.player;\r\n      //console.log(time);\r\n    },\r\n    //触发通知消息\r\n    message(obj) {\r\n      console.log(obj);\r\n    },\r\n    ready(player) {\r\n      console.log(\"ready\");\r\n    },\r\n    //进度更新\r\n    timeupdate(time) {\r\n      // console.log(time);\r\n    },\r\n\r\n    /*\r\n     @Desc: play\r\n     @Author: HHH , @Date: 2020-08-10 15:09:34\r\n    */\r\n    /* fnplay() {\r\n      var that = this;\r\n      // if (!that.player) {\r\n      //   return;\r\n      // }\r\n      postData(\"/web/camera/video/begin\", {\r\n        cameraNum: that.cameraNum\r\n      })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.code == 0) {\r\n            that.player.play();\r\n            that.playBtnColor = \"#676a6d\";\r\n            that.playBtnBackground = \"#ccc\";\r\n            that.stopBtnColor = \"#fff\";\r\n            that.stopBtnBackground = \"#d03edd\";\r\n          } else {\r\n            that.$message.error(res.code + \"，11\" + res.msg);\r\n          }\r\n        })\r\n        .catch(res => {\r\n          that.$message.error(res.code + \"，22\" + res.msg);\r\n        });\r\n    }, */\r\n\r\n    async fnplay() {\r\n      var that = this;\r\n      // if (!that.player) {\r\n      //   return;\r\n      // }\r\n      let res = await postData(\"/web/camera/video/begin\", {\r\n        cameraNum: that.cameraNum\r\n      }).catch(res => {\r\n        that.$message.error(res.code + \"，22\" + res.msg);\r\n      });\r\n      if (res.code == 0) {\r\n        that.player.play();\r\n        that.playBtnColor = \"#676a6d\";\r\n        that.playBtnBackground = \"#ccc\";\r\n        that.stopBtnColor = \"#fff\";\r\n        that.stopBtnBackground = \"#d03edd\";\r\n      } else {\r\n        that.$message.error(res.code + \"，11\" + res.msg);\r\n      }\r\n    },\r\n    /*\r\n     @Desc: pause\r\n     @Author: HHH , @Date: 2020-08-10 15:09:49\r\n    */\r\n    fnpause() {\r\n      var that = this;\r\n      postData(\"/web/camera/video/finish\", {\r\n        cameraNum: that.cameraNum\r\n      })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.code == 0) {\r\n            that.player.pause();\r\n            that.stopBtnBackground = \"#676a6d\";\r\n            that.stopBtnBackground = \"#ccc\";\r\n            that.playBtnColor = \"#fff\";\r\n            that.playBtnBackground = \"#d03edd\";\r\n          } else {\r\n            that.$message.error(res.code + \"，\" + res.msg);\r\n          }\r\n        })\r\n        .catch(res => {\r\n          that.$message.error(res.code + \"，\" + res.msg);\r\n        });\r\n    },\r\n    /*\r\n    @Desc: 控制台-中间-停止\r\n    @Author: HHH , @Date: 2020-08-14 11:20:24\r\n    */\r\n    centerControl() {\r\n      var that = this;\r\n      that.controlIcon.cenrerControl = require(\"../../static/img/stop-control2.png\");\r\n\r\n      that.controlIcon.top = require(\"../../static/img/play-icon-top.png\");\r\n      that.controlIcon.right = require(\"../../static/img/play-icon-right.png\");\r\n      that.controlIcon.bottom = require(\"../../static/img/play-icon-bottom.png\");\r\n      that.controlIcon.left = require(\"../../static/img/play-icon-left.png\");\r\n\r\n      postData(\"/web/camera/video/ytcontrol\", {\r\n        cameraNum: that.cameraNum,\r\n        yt_action: 24,\r\n        yt_step: 5\r\n      })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.code == \"0\") {\r\n            that.$message.success(\"stop-control！\");\r\n          } else {\r\n            that.$message.error(res.code + \"，\" + res.msg);\r\n          }\r\n        })\r\n        .catch(res => {\r\n          that.$message.error(res.code + \"，\" + res.msg);\r\n        });\r\n    },\r\n    /*\r\n     @Desc: 控制台-上\r\n     @Author: HHH , @Date: 2020-08-13 11:07:43\r\n    */\r\n    topControl() {\r\n      var that = this;\r\n      that.controlIcon.top = require(\"../../static/img/play-icon-top2.png\");\r\n\r\n      that.controlIcon.cenrerControl = require(\"../../static/img/stop-control.png\");\r\n      that.controlIcon.right = require(\"../../static/img/play-icon-right.png\");\r\n      that.controlIcon.bottom = require(\"../../static/img/play-icon-bottom.png\");\r\n      that.controlIcon.left = require(\"../../static/img/play-icon-left.png\");\r\n\r\n      postData(\"/web/camera/video/ytcontrol\", {\r\n        cameraNum: that.cameraNum,\r\n        yt_action: 3,\r\n        yt_step: 5\r\n      })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.code == \"0\") {\r\n            that.$message.success(\"top-ok\");\r\n          } else {\r\n            that.$message.error(res.code + \"，\" + res.msg);\r\n          }\r\n        })\r\n        .catch(res => {\r\n          that.$message.error(res.code + \"，\" + res.msg);\r\n        });\r\n    },\r\n    /*\r\n     @Desc: 控制台-右\r\n     @Author: HHH , @Date: 2020-08-13 11:18:12\r\n    */\r\n    rightControl() {\r\n      var that = this;\r\n      that.controlIcon.right = require(\"../../static/img/play-icon-right2.png\");\r\n\r\n      that.controlIcon.cenrerControl = require(\"../../static/img/stop-control.png\");\r\n      that.controlIcon.top = require(\"../../static/img/play-icon-top.png\");\r\n      that.controlIcon.bottom = require(\"../../static/img/play-icon-bottom.png\");\r\n      that.controlIcon.left = require(\"../../static/img/play-icon-left.png\");\r\n\r\n      postData(\"/web/camera/video/ytcontrol\", {\r\n        cameraNum: that.cameraNum,\r\n        yt_action: 2,\r\n        yt_step: 5\r\n      })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.code == \"0\") {\r\n            that.$message.success(\"right-ok！\");\r\n          } else {\r\n            that.$message.error(res.code + \"，\" + res.msg);\r\n          }\r\n        })\r\n        .catch(res => {\r\n          that.$message.error(res.code + \"，\" + res.msg);\r\n        });\r\n    },\r\n    /*\r\n     @Desc: 控制台-底\r\n     @Author: HHH , @Date: 2020-08-13 11:18:12\r\n    */\r\n    bottomControl() {\r\n      var that = this;\r\n      that.controlIcon.bottom = require(\"../../static/img/play-icon-bottom2.png\");\r\n\r\n      that.controlIcon.cenrerControl = require(\"../../static/img/stop-control.png\");\r\n      that.controlIcon.top = require(\"../../static/img/play-icon-top.png\");\r\n      that.controlIcon.right = require(\"../../static/img/play-icon-right.png\");\r\n      that.controlIcon.left = require(\"../../static/img/play-icon-left.png\");\r\n\r\n      postData(\"/web/camera/video/ytcontrol\", {\r\n        cameraNum: that.cameraNum,\r\n        yt_action: 4,\r\n        yt_step: 5\r\n      })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.code == \"0\") {\r\n            that.$message.success(\"bottom-ok！\");\r\n          } else {\r\n            that.$message.error(res.code + \"，\" + res.msg);\r\n          }\r\n        })\r\n        .catch(res => {\r\n          that.$message.error(res.code + \"，\" + res.msg);\r\n        });\r\n    },\r\n    /*\r\n     @Desc: 控制台-左\r\n     @Author: HHH , @Date: 2020-08-13 11:18:12\r\n    */\r\n    leftControl() {\r\n      var that = this;\r\n      that.controlIcon.left = require(\"../../static/img/play-icon-left2.png\");\r\n\r\n      that.controlIcon.cenrerControl = require(\"../../static/img/stop-control.png\");\r\n      that.controlIcon.top = require(\"../../static/img/play-icon-top.png\");\r\n      that.controlIcon.right = require(\"../../static/img/play-icon-right.png\");\r\n      that.controlIcon.bottom = require(\"../../static/img/play-icon-bottom.png\");\r\n\r\n      postData(\"/web/camera/video/ytcontrol\", {\r\n        cameraNum: that.cameraNum,\r\n        yt_action: 1,\r\n        yt_step: 5\r\n      })\r\n        .then(res => {\r\n          console.log(res);\r\n          if (res.code == \"0\") {\r\n            that.$message.success(\"left-ok！\");\r\n          } else {\r\n            that.$message.error(res.code + \"，\" + res.msg);\r\n          }\r\n        })\r\n        .catch(res => {\r\n          that.$message.error(res.code + \"，\" + res.msg);\r\n        });\r\n    }\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    //console.log(this.cameraNum);\r\n    this.getVideoSrc();\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.wrapper {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  background: rgb(0, 0, 0, 0.8);\r\n  width: 100%;\r\n  height: 100vh;\r\n  color: aliceblue;\r\n  z-index: 999;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.main {\r\n  width: 80%;\r\n  height: 60vh;\r\n  /* border: 1px solid #fff; */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.control-box {\r\n  width: 30%;\r\n  height: 100%;\r\n  z-index: 999;\r\n  /* border: 1px solid rgb(67, 142, 192);\r\n  box-shadow: rgb(0, 0,0, rgb(67, 142, 192)); */\r\n  /* display: flex;\r\n  justify-content: center;\r\n  align-items: center; */\r\n}\r\n.control {\r\n  width: 60%;\r\n  height: 100%;\r\n  border: 1px solid #ccc;\r\n  box-shadow: 0 0 0 rgb(67, 142, 192);\r\n  box-shadow: 0 0 0 rgb(67, 142, 192);\r\n  box-shadow: -2px -2px 0px rgb(67, 142, 192);\r\n  border-radius: 30px;\r\n  position: relative;\r\n  margin: 0 auto;\r\n}\r\n.control .circle {\r\n  width: 100%;\r\n  position: relative;\r\n  height: 60%;\r\n}\r\n.control .circle img {\r\n  display: inline-block;\r\n}\r\n.circle .center {\r\n  width: 70%;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.stop-control {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.circle .top {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 50%;\r\n  transform: translate(-50%, 10px);\r\n}\r\n.circle .right {\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n  transform: translate(-10px, -50%);\r\n}\r\n.circle .bottom {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translate(-50%, -10px);\r\n}\r\n.circle .left {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  transform: translate(10px, -50%);\r\n}\r\n\r\n.btn-wrap {\r\n  width: 80%;\r\n  height: 60px;\r\n  position: absolute;\r\n  bottom: 20px;\r\n  left: 50%;\r\n  transform: translate(-50%, 0);\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n}\r\n.play-btn {\r\n  border: 0;\r\n  background-color: transparent;\r\n  outline: none;\r\n  width: 60px;\r\n  height: 36px;\r\n  line-height: 36px;\r\n  border-radius: 15px;\r\n  /* background: #5447ff;\r\n  color: #fff; */\r\n}\r\n.stop-btn {\r\n  border: 0;\r\n  background-color: transparent;\r\n  outline: none;\r\n  width: 60px;\r\n  height: 36px;\r\n  line-height: 36px;\r\n  border-radius: 15px;\r\n  /* background: #d03edd;\r\n  color: #fff; */\r\n}\r\n/* right */\r\n.video-box {\r\n  flex: 1;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.video-box >>> .el-icon-circle-close {\r\n  position: absolute;\r\n  top: -40px;\r\n  right: -40px;\r\n  font-size: 30px;\r\n}\r\n.cover-box {\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  background: rgb(0, 0, 0, 0.8);\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n.cover-box img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.video-box >>> .player-wrapper {\r\n  height: 100% !important;\r\n}\r\n\r\n.video-box >>> .video-wrapper {\r\n  height: 100% !important;\r\n}\r\n.video-box >>> .video-wrapper {\r\n  padding-bottom: 0 !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"home-wrap\">\r\n    <div class=\"show-title\">\r\n      <span>摄像机列表</span>\r\n      <el-button class=\"manual-refresh\" type=\"primary\" plain @click=\"manualRefresh\">\r\n        手动刷新\r\n        <i class=\"el-icon-refresh el-icon--right\"></i>\r\n      </el-button>\r\n    </div>\r\n    <!-- 摄像机列表 -->\r\n    <el-table\r\n      class=\"cameraList\"\r\n      :data=\"tableData\"\r\n      stripe\r\n      border\r\n      style=\"width: 100%\"\r\n      max-height=\"300\"\r\n      :header-cell-style=\"{padding:'5px'}\"\r\n      :row-style=\"{height:'35px'}\"\r\n      :cell-style=\"{padding:'0px'}\"\r\n    >\r\n      <el-table-column label=\"摄像机编号\" min-width=\"8.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">\r\n          <el-popover trigger=\"hover\" placement=\"top\">\r\n            <p>摄像机编号: {{ scope.row.cameraNum }}</p>\r\n            <p>摄像机名称: {{ scope.row.cameraName }}</p>\r\n            <p>行政区: {{ scope.row.area }}</p>\r\n            <p>摄像机方向: {{ scope.row.cameraOrientation }}</p>\r\n            <p>摄像机类型: {{ scope.row.摄像机类型 }}</p>\r\n            <p>所属类别: {{ scope.row.classify }}</p>\r\n            <p>所属单位: {{ scope.row.department }}</p>\r\n            <p>网关编号: {{ scope.row.gatewayNum }}</p>\r\n            <p>经度/纬度: {{ scope.row.longAndLati }}</p>\r\n            <p>摄像机桩号: {{ scope.row.pileNum }}</p>\r\n            <p>所在高速: {{ scope.row.poiName }}</p>\r\n            <p>所在路段: {{ scope.row.road }}</p>\r\n            <p>所属管理处: {{ scope.row.roadSec }}</p>\r\n            <div slot=\"reference\" class=\"name-wrapper\">\r\n              <el-tag size=\"medium\">{{ scope.row.cameraNum }}</el-tag>\r\n            </div>\r\n          </el-popover>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"摄像机名称\" min-width=\"8.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.cameraName)}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"行政区划代码\" min-width=\"6.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.area)}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"摄像机方向\" min-width=\"6.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.cameraOrientation)}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"摄像机类型\" min-width=\"4.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.cameraType)}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"所属类别\" min-width=\"5.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.classify==0?\"公路\":\"其他\")}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"所属单位名称\" min-width=\"6.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.department)}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"网关编号\" min-width=\"8.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.gatewayNum)}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"经度/纬度\" min-width=\"6.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.longAndLati)}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"摄像机桩号\" min-width=\"6.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{scope.row.pileNum}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"所在高速\" min-width=\"6.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{decodeURI(scope.row.poiName)}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"所在路段\" min-width=\"6.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{scope.row.road}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"所属管理处\" min-width=\"5.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">{{scope.row.roadSec}}</template>\r\n      </el-table-column>\r\n      <el-table-column class=\"play-box\" fixed=\"right\" label=\"操作\" min-width=\"4.66%\" align=\"left\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tooltip popper-class=\"tooltip\" placement=\"top\">\r\n            <i class=\"el-icon-video-play\" @click=\"clickPlayIcon(scope.row.cameraNum)\"></i>\r\n            <div slot=\"content\" class=\"tooltip-content\">\r\n              <div>播放视频</div>\r\n            </div>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 弹窗组件 -->\r\n    <PlayPopup v-if=\"showPlayPopup\" :cameraNum=\"cameraNum\"></PlayPopup>\r\n    <!-- 分页 -->\r\n    <div class=\"block\">\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"PaginationSet.currentPage\"\r\n        :limit.sync=\"PaginationSet.pagesize\"\r\n        layout=\"total, prev, pager, next,jumper\"\r\n        :total=\"PaginationSet.listTotal\"\r\n      ></el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getData, postData } from \"../../utils/request/http\";\r\nimport PlayPopup from \"../../components/PlayPopup\";\r\nimport bus from \"./../../utils/bus\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      //ip列表数据\r\n      tableData: [],\r\n      //ip列表的分页参数\r\n      PaginationSet: {\r\n        listTotal: 0, //IP列表的总数\r\n        currentPage: 1, //默认开始页面\r\n        pagesize: 1000 //每页初始显示条数\r\n      },\r\n      copyTableData1: [], //copy ip list\r\n      showPlayPopup: false, //播放弹窗\r\n      cameraNum: \"\"\r\n    };\r\n  },\r\n  components: {\r\n    PlayPopup\r\n  },\r\n  created() {\r\n    /*\r\n     @Desc: 关闭弹窗的事件bus\r\n     @Author: HHH , @Date: 2020-08-07 14:55:20\r\n    */\r\n    bus.$on(\"sendCloseEvent\", showPlayPopup => {\r\n      this.showPlayPopup = false;\r\n      console.log(this.showPlayPopup);\r\n    });\r\n  },\r\n  mounted() {\r\n    this.getcameraList();\r\n  },\r\n  methods: {\r\n    /*\r\n     @Desc: 初始列表\r\n     @Author: HHH , @Date: 2020-08-13 10:27:14\r\n    */\r\n\r\n    async getcameraList() {\r\n      var that = this;\r\n      let res = await postData(\"/web/camera/list\", {}).catch();\r\n      if (res.code == \"0\") {\r\n        console.log(res);\r\n        that.tableData = res.data.cameras;\r\n        that.PaginationSet.listTotal = res.data.cameras.length;\r\n      } else {\r\n        //that.$message.error(\"error1\");\r\n      }\r\n    },\r\n    /*\r\n     @Desc: ip列表中，显示当前所在页\r\n      @params {Number} current 第几页\r\n     @Author: HHH , @Date: 2020-08-13 10:27:41\r\n    */\r\n\r\n    handleCurrentChange(current) {\r\n      //console.log(`当前在第: ${current}页`);\r\n      this.PaginationSet.currentPage = current;\r\n      this.tableData = this.paging1(this.PaginationSet.pagesize, current);\r\n    },\r\n    /*\r\n     @Desc: 本地分页的方法\r\n     @Author: HHH , @Date: 2020-08-13 10:28:00\r\n    */\r\n    paging1(size, current) {\r\n      const tableList1 = JSON.parse(JSON.stringify(this.copyTableData1));\r\n      const tablePush = [];\r\n      tableList1.forEach((item, index) => {\r\n        if (size * (current - 1) <= index && index <= size * current - 1) {\r\n          tablePush.push(item);\r\n        }\r\n      });\r\n      return tablePush;\r\n    },\r\n    /*\r\n     @Desc: 点击列表中的，播放按钮显示弹窗\r\n     @Author: HHH , @Date: 2020-08-07 14:57:42\r\n    */\r\n    clickPlayIcon(cameraNum) {\r\n      this.showPlayPopup = true;\r\n      //console.log(this.showPlayPopup);\r\n      this.cameraNum = cameraNum;\r\n    },\r\n    /*\r\n     @Desc: 手动刷新，摄像机列表\r\n     @Author: HHH , @Date: 2020-08-18 11:06:31\r\n    */\r\n    manualRefresh() {\r\n      var that = this;\r\n      getData(\"/web/sip/catalog\", {})\r\n        .then(res => {\r\n          that.logining = false;\r\n          console.log(res);\r\n          if (res.code == \"0\") {\r\n            that.getcameraList();\r\n          } else {\r\n            that.$message.error(res.code + \"，\" + res.msg);\r\n          }\r\n        })\r\n        .catch(res => {\r\n          that.$message.error(res.code + \"，\" + res.msg);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n/*标题*/\r\n.show-title {\r\n  width: 100%;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  position: relative;\r\n  background: #c0dee2;\r\n  padding-left: 15px;\r\n  font-size: 14px;\r\n  margin: 6px 0 10px 0;\r\n  border-radius: 10px 10px 0 0;\r\n  font-weight: bold;\r\n}\r\n\r\n.show-title::before {\r\n  content: \"\";\r\n  width: 2px;\r\n  height: 16px;\r\n  /* background: #29c0b7; */\r\n  background: #676a6d;\r\n  position: absolute;\r\n  top: 12px;\r\n  left: 27px;\r\n}\r\n\r\n.show-title span {\r\n  float: left;\r\n  color: #676a6d;\r\n  margin-left: 25px;\r\n}\r\n.show-title .manual-refresh {\r\n  float: right;\r\n  margin-right: 20px;\r\n}\r\n/* ip列表 */\r\n.cameraList {\r\n  margin-top: 35px;\r\n  /* padding: 0 20px; */\r\n}\r\n\r\n/* 更改form表单默认样式,表头 */\r\n.home-wrap >>> .el-table--border th,\r\n.el-table__fixed-right-patch {\r\n  /* background: #c0dee2; */\r\n  background: #f0f3f4;\r\n}\r\n\r\n.home-wrap >>> .el-table .cell,\r\n.el-table--border td:first-child .cell,\r\n.el-table--border th:first-child .cell {\r\n  padding-left: 10px;\r\n  text-align: center;\r\n}\r\n.home-wrap >>> .demo-form-inline {\r\n  width: 96%;\r\n  margin: 0 auto;\r\n  margin-top: 35px;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  border: 1px solid #c0dee2;\r\n  box-shadow: 0px 3px 1px #ceece8;\r\n  border-radius: 25px;\r\n}\r\n.ip-del-btn {\r\n  color: #f13636;\r\n}\r\n\r\n/* 分页*/\r\n.block {\r\n  margin: 20px 0 0 10px;\r\n}\r\n\r\n.home-wrap >>> .el-icon-video-play {\r\n  font-size: 20px !important;\r\n  z-index: 990;\r\n}\r\n\r\n/* play-icon */\r\n</style>\r\n"]}